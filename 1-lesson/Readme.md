
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."


## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

### Ответ:
1. Полная или аппаратная виртуализация - говорит сама за себя. Это значит что виртуалки работают на аппаратном уровне без ОС на самом Гипервизоре. Гостевая система не зависит от архитектуры хостовой платформы и реализации платформы виртуализации.Гостевая система не зависит от архитектуры хостовой платформы и реализации платформы виртуализации. Взаимодействие между гостевой операционной системой (ОС) и оборудованием осуществляется посредством гипервизора.
2. Паравиртуализация - когда на гипервизоре уже есть ОС и она необходима для мониторинга и управления виртуальными машинами и предоставления им доступа к аппаратным ресурсам сервера через ядро ОС хостовой машины.
Паравиртуализация требует, чтобы гостевая ОС была изменена для гипервизора, и это является недостатком метода. Однако, паравиртуализация предлагает высокую производительность, почти как у реальной системы. При этом, как и при полной виртуализации, одновременно могут поддерживаться различные операционные системы. Но определенным недостатком паравиртуализации можно считать ограниченное количество поддерживаемых ОС. Поскольку есть необходимость вносить изменения в код ядра ОС, что не всегда представляется возможным в силу закрытости некоторых ОС.
3. Виртуализация уровна ОС - ограниченная вариация паравиртуализации, т.к. позволяет запускать только виртуалки на базе ядра хостового сервера.Эта техника виртуализирует серверы непосредственно над операционной системой. Этот метод поддерживает единственную операционную систему и, в самом общем случае, просто изолирует независимые виртуальные серверы (контейнеры) друг от друга. Для разделения ресурсов одного сервера между контейнерами, данная виртуализация требует внесения изменений в ядро операционной системы (например, как в случае с OpenVZ), но при этом преимуществом является родная производительность, без «накладных расходов» на виртуализацию устройств.


## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Ответ
Организация серверов:
- физические сервера,
  <br>-Системы, выполняющие высокопроизводительные расчеты на GPU. Более низкоуровневый доступ к аппаратной части хостовой машины, без промежуточного ядра ОС гипервизора.
  <br>-Высоконагруженная база данных, чувствительная к отказу. Для нагружнныъ баз данных нужна максимальная производительность и отклик IOPs. Такое лучше достигается на физических серверах.
- паравиртуализация
<br>-Windows системы для использования бухгалтерским отделом. Менее требовательно к ресурсам. Можно легко масштабировать ресурсы Виртуальных Машин.
- виртуализация уровня ОС.
  <br>-Различные web-приложения. Могут базироваться на одной версии ОС. Динамическое масштабирование.


## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

### Ответ
1. Hyper-V (в режиме серверной роли). Т.к. 100 виртуальных машин - уже серьёзная организация. Т.к. надёжно. Высокий уровень безопасности, хорошая поддержка. Кластеризация и репликация виртуальных машин.
2. Тут бы выбрал PROXMOX + KVM, чтобы был собран надёжный кластер и решение осталось бесплатным.
3. XEN был бы самым оптимальным решением. Т.к. на базе него достигается максимальная производительность гостевой ОС, сравнимая с хостовой.
4. VirtualBox/Vagrant. Удобно создавать вирталки для тестирования и стендов.


## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Ответ:
Ну гетерогенные системы уже во всю используются, когда в облаках разворачиваются кластеры из виртуальных машин, а на них работают докер контейнеры. Не вижу в этом ничего плохого, если это сделано с умом. Я бы использовал такую систему для своих задач. Это экономно и эффективно и в меру надёжно.
В Корпоративной сети можно использовать несколько разных гипервизоров, допустим при переходе от платного решения к бесплатному или наоборот. Их необходимо разделить по разным подсетям. Я бы например оставил на предприятии VMWare для ПРОДа и что-нибудь из бесплатных решений типа XEN или KVM для ДЕВа.


