# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
  <br>-Документно-ориентированные - для хранения различной информации в полях. 
- Склады и автомобильные дороги для логистической компании
   <br>- Графовые, т.к. удобно описывать связи между населёнными пунктами.
- Генеалогические деревья
   <br>-Иерархический, т.к. удобно описывать и хранить древо.
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
   <br>-Ключ-значение. Они для этого и создавались :)
- Отношения клиент-покупка для интернет-магазина
   <br>-Объектно-ориентированный тип, т.к. удобно описывать свойства товаров и заказов через атрибуты объекта. Но, в основном, используют реляционные типы БД.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
   <br>-CP - ноды доступны, но при разделении ответ может не приходить до 2-х часов до момента синхронизации.
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
   <br>-AP - при разделении идёт рассинхронизация данных на нодах.
- Система может не прислать корректный ответ или сбросить соединение
   <br>-CA - при потере связи на ноде от неё могут не приходит данные до клиента.

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?
 <br>-Данные записываются на все узлы с задержкой до часа (асинхронная запись): EL-PC
-При сетевых сбоях, система может разделиться на 2 раздельных кластера:PA-EL
-Система может не прислать корректный ответ или сбросить соединение:  PA-EC

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

## Ответ <br>
Теоретически можно, наверное, если система комплексная и совмещает несколько БД, с разными принципами.
Но если отдельная система, то принципы не могут сочетаться, т.к. ACID позволяет проектировать высоконадёжные, гарантированные, согласованные системы.
BASE, в свою очередь позволяет проектировать высокопроизводительные системы. Система может отвечать с большой скоростью на любой запрос, но ответ 
может содержать неверные данные, что не приемлемо в системах по принципу ACID.


## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

## Ответ
 <br>- Такие базы как Redis, ZeroMQ, RabbitMQ.
 <br> - Работают в оперативной памяти. Используются свои команды для обращения к данным.<br>
 <br><b>Минусы: </b><br>
 - Нет сегментации на пользователей или группы пользователей. Т.е. доступ только по одной связке логин/пароль. <br>
 - По-умолчанию не поддерживается автоматическое переключение ведущей мастер ноды при её отказе. <br>
 - Дороговизна хранилища данных, т.к. данные хранятся в оперативной памяти.


<br>Техническое решение. <br>
- Предлагается использование СУБД Redis. <br>
- Будет произведена установка таймаута на key. По истечении таймаута ключ будет автоматически удалён.
Будет установлен параметр ключа EXPIRE key seconds. Длительность будет согласована с заказчиком.


---